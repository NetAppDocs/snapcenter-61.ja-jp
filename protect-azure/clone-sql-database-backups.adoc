---
permalink: protect-azure/clone-sql-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for SQL Server Database, clone, database, backups 
summary: SnapCenterを使用してバックアップをクローニングすることができます。 
---
= SQL Serverデータベースのバックアップのクローニング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenter を使用すると、データベースのバックアップを使用して SQL データベースのクローンを作成できます。作成されるクローンはシック クローンであり、親容量プール上に作成されます。

.タスク概要
クローニングのターゲット インスタンスに、SMB ADActiveディレクトリ ドメインに属し、ファイル権限を適切に設定する権限があるActive Directoryユーザが設定されていることを確認する必要があります。クレデンシャルは、SnapCenterでインスタンス レベルで設定する必要があります。

ターゲット インスタンスのSQL認証は、SMB構成ではサポートされません。ターゲット インスタンスは、必要な権限を持つActive Directoryユーザを使用してSnapCenterで設定する必要があります。

SnapCenter Plug-inサービスのサービス アカウントがActive Directoryユーザでない場合は、クローニングの実行中にこれを偽装して必要な処理を実行できるように、ソース ボリュームを完全に制御できるユーザが必要です。

.手順
. 左側のナビゲーション ペインで [*リソース*] を選択し、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから [データベース] または [リソース グループ] を選択します。
. データベースまたはリソース グループを選択します。
. *コピーの管理* ビュー ページで、プライマリ ストレージ システムからのバックアップを選択します。
. バックアップを選択し、*を選択します。image:../media/clone_icon.gif["クローンアイコン"] *。
. *クローン オプション* ページで、必要な詳細をすべて入力します。
. [Location]ページで、クローンを作成するストレージの場所を選択します。
+
SQL ServerデータベースANFボリュームが手動QoS容量プールに設定されている場合は、クローン ボリュームのQoSを指定します。

+
クローン ボリュームにQoSが指定されていない場合は、ソース ボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. [Logs]ページで、次のいずれかのオプションを選択します。
+
.. ログなしで完全なバックアップのみをクローンする場合は、「*なし*」を選択します。
.. 完全バックアップ以降の日付の利用可能なすべてのログ バックアップを複製する場合は、[*すべてのログ バックアップ*] を選択します。
.. 選択した日付のバックアップ ログまでに作成されたバックアップ ログに基づいてデータベースのクローンを作成する場合は、[*次のログ バックアップまで*] を選択します。
.. 指定した日時以降にトランザクション ログを適用しない場合は、[*特定の日付まで*] を選択します。


. *スクリプト* ページで、スクリプトのタイムアウト、パス、およびクローン操作の前または後に実行するプレスクリプトまたはポストスクリプトの引数をそれぞれ入力します。
. *通知*ページの*電子メール設定*ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、[完了] を選択します。
. *モニター* > *ジョブ* を選択して、操作の進行状況を監視します。




== クローン ライフサイクルの実行

SnapCenterを使用して、リソース グループまたはデータベースからクローンを作成できます。クローニングはオンデマンドで実行することも、リソース グループまたはデータベースに対して定期的なクローニング処理をスケジュール設定することもできます。バックアップを定期的にクローニングすると、クローンを使用してアプリケーションの開発、データの取り込み、またはデータのリカバリを行うことができます。

.手順
. 左側のナビゲーション ペインで [*リソース*] を選択し、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから [データベース] または [リソース グループ] を選択します。
. データベースまたはリソース グループを選択します。
. *コピーの管理* ビュー ページで、プライマリ ストレージ システムからのバックアップを選択します。
. バックアップを選択し、*を選択します。image:../media/clone_icon.gif["クローンアイコン"] *。
. *クローン オプション* ページで、必要な詳細をすべて入力します。
. [Location]ページで、クローンを作成するストレージの場所を選択します。
+
SQL ServerデータベースANFボリュームが手動QoS容量プールに設定されている場合は、クローン ボリュームのQoSを指定します。

+
クローン ボリュームにQoSが指定されていない場合は、ソース ボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. *スクリプト* ページで、スクリプトのタイムアウト、パス、およびクローン操作の前または後に実行するプレスクリプトまたはポストスクリプトの引数をそれぞれ入力します。
. [Schedule]ページで、次のいずれかを実行します。
+
** クローンジョブをすぐに実行するには、[今すぐ実行] を選択します。
** クローン操作を実行する頻度、クローン スケジュールを開始する日時、クローン操作を実行する日、スケジュールの有効期限、スケジュールの有効期限が切れた後にクローンを削除するかどうかを決定する場合は、[スケジュールの構成] を選択します。


. *通知*ページの*電子メール設定*ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、[完了] を選択します。
. *モニター* > *ジョブ* を選択して、操作の進行状況を監視します。


---
permalink: protect-azure/clone-oracle-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for Oracle Database, clone, database, backups. split clone, pluggable database 
summary: SnapCenterを使用してバックアップをクローニングすることができます。 
---
= Oracleデータベースのバックアップのクローニング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenterを使用すると、データベースのバックアップ機能でOracleデータベースをクローニングできます。作成されるクローンはシック クローンであり、親容量プール上に作成されます。

.手順
. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから *データベース* または *リソース グループ* を選択します。
. データベースを選択します。
. [Manage Copies]ビュー ページで、プライマリ ストレージ システムからバックアップを選択します。
. データバックアップを選択し、*をクリックします。image:../media/clone_icon.gif["クローンアイコン"] *。
. [Name]ページで、データベース（CDBまたは非CDB）をクローニングするか、プラガブル データベース（PDB）をクローニングするかを選択します。
. [Locations]ページで、必要な詳細を指定します。
+
OracleデータベースANFボリュームが手動QoS容量プールに設定されている場合は、クローン ボリュームのQoSを指定します。

+
クローン ボリュームにQoSが指定されていない場合は、ソース ボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. [Credentials]ページで、次のいずれかを実行します。
+
.. sysユーザのクレデンシャル名には、クローン データベースのsysユーザ パスワードの定義に使用するクレデンシャルを選択します。
.. ASM インスタンス資格情報名では、クローン ホスト上の ASM インスタンスへの接続に OS 認証が有効になっている場合は、「*なし*」を選択します。
+
有効でない場合は、[sys]ユーザ、またはクローン ホストに適用される「sysasm」権限を持つユーザが設定されたOracle ASMクレデンシャルを選択します。



. [Pre-Ops]ページでプリスクリプトのパスと引数を指定し、[Database parameter settings]セクションで、データベースの初期化に使用される事前入力されたデータベース パラメータの値を変更します。
. 事後操作ページでは、クローンされたデータベースの回復を実行するために、*データベースの回復*と*キャンセルまで*がデフォルトで選択されています。
+
.. *[キャンセルまで]* を選択した場合、 SnapCenter は、クローン作成対象として選択されたデータ バックアップの後のアーカイブ ログの連続したシーケンスを持つ最新のログ バックアップをマウントしてリカバリを実行します。
.. *日付と時刻* を選択すると、 SnapCenter は指定された日付と時刻までデータベースを回復します。
.. *SCN まで* を選択すると、 SnapCenter は指定された SCN までデータベースを回復します。
.. *外部アーカイブ ログの場所を指定する* を選択した場合、 SnapCenter は指定された SCN または選択された日時に基づいて最適な数のログ バックアップを識別してマウントします。
.. デフォルトでは、*新しい DBID の作成* チェックボックスが選択されており、クローンされたデータベースとソース データベースを区別する一意の番号 (DBID) が生成されます。
+
ソース データベースのDBIDをクローン データベースに割り当てる場合は、このチェック ボックスをオフにします。このシナリオでは、ソース データベースがすでに登録されている外部のRMANカタログにクローン データベースを登録すると、処理は失敗します。

.. クローンされたデータベースのデフォルトの一時表領域に一時ファイルを作成する場合は、「一時表領域用の一時ファイルを作成する」チェックボックスをオンにします。
.. *クローンの作成時に適用する SQL エントリを入力* で、クローンの作成時に適用する SQL エントリを追加します。
.. *クローン操作後に実行するスクリプトを入力*で、クローン操作後に実行するポストスクリプトのパスと引数を指定します。


. 通知ページの *電子メール設定* ドロップダウン リストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、[完了] を選択します。
. *モニター* > *ジョブ* を選択して、操作の進行状況を監視します。




== プラガブル データベースのクローニング

プラガブル データベース（PDB）は、同じホストまたは代替ホスト上の別のターゲットCDBまたは同じターゲットCDBにクローニングできます。クローニングされたPDBを目的のSCNまたは日時にリカバリすることもできます。

.手順
. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから *データベース* または *リソース グループ* を選択します。
. タイプが単一インスタンス（マルチテナント）のデータベースを選択します。
. [Manage Copies]ビュー ページで、プライマリ ストレージ システムからバックアップを選択します。
. バックアップを選択し、*をクリックします。image:../media/clone_icon.gif["クローンアイコン"] *。
. 「名前」ページで、「*PDB クローン*」を選択し、その他の詳細を指定します。
. [Locations]ページで、必要な詳細を指定します。
. [Pre-Ops]ページでプリスクリプトのパスと引数を指定し、[Database parameter settings]セクションで、データベースの初期化に使用される事前入力されたデータベース パラメータの値を変更します。
. 事後操作ページでは、クローンされたデータベースのリカバリを実行するために、デフォルトで *キャンセルまで* が選択されます。
+
.. *[キャンセルまで]* を選択した場合、 SnapCenter は、クローン作成対象として選択されたデータ バックアップの後のアーカイブ ログの連続したシーケンスを持つ最新のログ バックアップをマウントしてリカバリを実行します。
.. *日付と時刻* を選択すると、 SnapCenter は指定された日付と時刻までデータベースを回復します。
.. *外部アーカイブ ログの場所を指定する* を選択した場合、 SnapCenter は指定された SCN または選択された日時に基づいて最適な数のログ バックアップを識別してマウントします。
.. デフォルトでは、*新しい DBID の作成* チェックボックスが選択されており、クローンされたデータベースとソース データベースを区別する一意の番号 (DBID) が生成されます。
+
ソース データベースのDBIDをクローン データベースに割り当てる場合は、このチェック ボックスをオフにします。このシナリオでは、ソース データベースがすでに登録されている外部のRMANカタログにクローン データベースを登録すると、処理は失敗します。

.. クローンされたデータベースのデフォルトの一時表領域に一時ファイルを作成する場合は、「一時表領域用の一時ファイルを作成する」チェックボックスをオンにします。
.. *クローンの作成時に適用する SQL エントリを入力* で、クローンの作成時に適用する SQL エントリを追加します。
.. *クローン操作後に実行するスクリプトを入力*で、クローン操作後に実行するポストスクリプトのパスと引数を指定します。


. 通知ページの *電子メール設定* ドロップダウン リストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、[完了] を選択します。
. *モニター* > *ジョブ* を選択して、操作の進行状況を監視します。


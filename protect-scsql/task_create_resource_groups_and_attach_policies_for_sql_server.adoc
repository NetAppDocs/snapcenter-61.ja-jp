---
permalink: protect-scsql/task_create_resource_groups_and_attach_policies_for_sql_server.html 
sidebar: sidebar 
keywords: run as 
summary: リソース グループはコンテナであり、一緒にバックアップして保護するリソースをここに追加します。リソース グループを使用することで、特定のアプリケーションに関連するすべてのデータを同時にバックアップできます。リソース グループはいずれのデータ保護ジョブにも必要になります。リソース グループに1つ以上のポリシーを適用して、実行するデータ保護ジョブのタイプを定義することも必要です。 
---
= SQL Serverに対するリソース グループの作成とポリシーの適用
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リソース グループはコンテナであり、一緒にバックアップして保護するリソースをここに追加します。リソース グループを使用することで、特定のアプリケーションに関連するすべてのデータを同時にバックアップできます。リソース グループはいずれのデータ保護ジョブにも必要になります。リソース グループに1つ以上のポリシーを適用して、実行するデータ保護ジョブのタイプを定義することも必要です。

リソースを個別に保護する場合、新しいリソース グループを作成する必要はありません。保護されたリソースでバックアップを作成することができます。

.タスク概要
* ONTAP 9.12.1以前のバージョンでは、リストアの一環としてSnapLock Vault Snapshotから作成されたクローンが、SnapLock Vaultの有効期限を継承します。SnapLockの有効期限が過ぎたあと、ストレージ管理者がクローンを手動でクリーンアップする必要があります。
* SnapMirrorアクティブ同期を使用するリソースを含む既存のリソース グループにSnapMirrorアクティブ同期を使用しない新しいデータベースを追加することはできません。
* SnapMirrorアクティブ同期のフェイルオーバー モードである既存のリソース グループに新しいデータベースを追加することはできません。リソースを追加できるのは、通常の状態またはフェイルバック状態のリソース グループのみです。


.手順
. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから [データベース] を選択します。
+

NOTE: SnapCenterに最近リソースを追加した場合は、[リソースの更新] をクリックして、新しく追加されたリソースを表示します。

. *新しいリソース グループ*をクリックします。
. [Name]ページで、次の操作を実行します。
+
|===
| フィールド | 操作 


 a| 
Name
 a| 
リソース グループ名を入力します。


NOTE: リソース グループ名は250文字以内で指定する必要があります。



 a| 
Tags
 a| 
リソース グループを検索しやすくするために、ラベルを入力します。たとえば、複数のリソース グループにHRをタグとして追加すると、あとからHRタグに関連付けられたすべてのリソース グループを検索できます。



 a| 
Use custom name format for Snapshot copy
 a| 
オプション: カスタム スナップショットの名前と形式を入力します。たとえば、customtext_resourcegroup_policy_hostnameやresourcegroup_hostnameなどの形式です。デフォルトでは、Snapshotの名前の後ろにタイムスタンプが付加されます。

|===
. [Resources]ページで、次の手順を実行します。
+
.. ホスト名、リソース タイプ、およびSQL Serverインスタンスをドロップダウン リストから選択して、リソースのリストをフィルタリングします。
+

NOTE: 最近追加したリソースは、ユーザがリソース リストを更新するまで[Available Resources]のリストには表示されません。

.. *利用可能なリソース* セクションから選択したリソース セクションにリソースを移動するには、次のいずれかの手順を実行します。
+
*** 同じボリューム上のすべてのリソースを「選択したリソース」セクションに移動するには、「*同じストレージ ボリューム上のすべてのリソースを自動選択*」を選択します。
*** *利用可能なリソース*セクションからリソースを選択し、右矢印をクリックして*選択したリソース*セクションに移動します。




. [Policies]ページで、次の手順を実行します。
+
.. ドロップダウン リストから1つ以上のポリシーを選択します。
+

NOTE: *をクリックしてポリシーを作成することもできますimage:../media/add_policy_from_resourcegroup.gif["ポリシーフォームリソースグループを追加する"]*。

+
[Configure schedules for selected policies]セクションに、選択したポリシーがリストされます。

.. 選択したポリシーのスケジュールを構成するセクションで、*をクリックします。image:../media/add_policy_from_resourcegroup.gif["ポリシーフォームリソースグループを追加する"] * スケジュールを構成するポリシーの [スケジュールの構成] 列で、
.. [ポリシー _policy_name_ のスケジュールの追加] ダイアログ ボックスで、開始日、有効期限、頻度を指定してスケジュールを構成し、[*OK*] をクリックします。
+
この操作は、ポリシーに指定されている頻度ごとに実行する必要があります。構成されたスケジュールは、[*選択したポリシーのスケジュールを構成する*] セクションの [適用されたスケジュール] 列に表示されます。

.. [Microsoft SQL Server scheduler]を選択します。
+
スケジューリング ポリシーに関連付けるスケジューラ インスタンスも選択する必要があります。

+
[Microsoft SQL Server scheduler]を選択しなかった場合は、デフォルトで[Microsoft Windows scheduler]に設定されます。



+
サードパーティのバックアップ スケジュールは、SnapCenterのバックアップ スケジュールと重複している場合、サポートされません。WindowsスケジューラまたはSQL Serverエージェントで作成されたスケジュールを変更したり、バックアップ ジョブの名前を変更したりしないでください。

. [Verification]ページで、次の手順を実行します。
+
.. *検証サーバー*ドロップダウンリストから検証サーバーを選択します。
+
このリストには、SnapCenterで追加されたすべてのSQL Serverが含まれます。検証サーバ（ローカル ホストまたはリモート ホスト）は複数選択できます。

+

NOTE: 検証サーバのバージョンは、プライマリ データベースをホストしているSQL Serverのバージョンおよびエディションと一致している必要があります。

.. *ロケータのロード* をクリックして、 SnapMirrorおよびSnapVaultボリュームをロードし、セカンダリ ストレージで検証を実行します。
.. 検証スケジュールを設定するポリシーを選択し、*をクリックします。image:../media/add_policy_from_resourcegroup.gif["ポリシーフォームリソースグループを追加する"] *。
.. [Add Verification Schedules policy_name]ダイアログ ボックスで、次の操作を実行します。
+
|===
| 状況 | 操作 


 a| 
バックアップ後に検証を実行
 a| 
*バックアップ後に検証を実行*を選択します。



 a| 
検証のスケジュールを設定
 a| 
*スケジュールされた検証を実行*を選択します。

|===
.. [OK]をクリックします。
+
設定したスケジュールが[Applied Schedules]列にリストされます。*をクリックすると確認して編集できますimage:../media/edit_icon.gif["設定されたスケジュールを編集するためのアイコン"]* またはクリックして削除 *image:../media/delete_icon_for_configuringschedule.gif["削除アイコン"] *。



. 通知ページの *電子メール設定* ドロップダウン リストから、電子メールを送信するシナリオを選択します。
+
また、送信者と受信者のEメール アドレス、およびEメールの件名を指定する必要があります。リソース グループで実行された操作のレポートを添付する場合は、「*ジョブ レポートの添付*」を選択します。

+

NOTE: Eメール通知を利用する場合は、GUIまたはPowerShellのSet-SmSmtpServerコマンドを使用して、SMTPサーバの詳細を指定しておく必要があります。

. 概要を確認し、[完了] をクリックします。


.関連情報
link:task_create_backup_policies_for_sql_server_databases.html["SQL Serverデータベースのバックアップ ポリシーの作成"]

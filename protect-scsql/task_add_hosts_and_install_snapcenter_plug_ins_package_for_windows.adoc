---
permalink: protect-scsql/task_add_hosts_and_install_snapcenter_plug_ins_package_for_windows.html 
sidebar: sidebar 
keywords: credentials 
summary: 'ホストを追加し、プラグイン パッケージをインストールするには、SnapCenter の [ホストの追加] ページを使用する必要があります。プラグインは、自動的にリモート ホストにインストールされます。' 
---
= ホストの追加とSnapCenter Plug-ins Package for Windowsのインストール
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ホストを追加し、プラグイン パッケージをインストールするには、 SnapCenter の*ホストの追加* ページを使用する必要があります。プラグインは、自動的にリモート ホストにインストールされます。

.開始する前に
* SnapCenter Serverホストのオペレーティング システムがWindows 2019で、プラグイン ホストのオペレーティング システムがWindows 2022の場合は、次の手順を実行する必要があります。
+
** Windows Server 2019（OSビルド17763.5936）以降にアップグレードする
** Windows Server 2022（OSビルド20348.2402）以降にアップグレードする


* この処理は、SnapCenter Adminロールなど、プラグインのインストールとアンインストールの権限のあるロールが割り当てられているユーザが実行する必要があります。
* 組み込みでないクレデンシャルを指定してWindowsホストにプラグインをインストールする場合は、ホストのUACを無効にする必要があります。
* メッセージ キュー サービスが実行中であることを確認する必要があります。
* グループ管理サービス アカウント（gMSA）を使用する場合は、管理者権限でgMSAを設定する必要があります。
+
link:task_configure_gMSA_on_windows_server_2012_or_later.html["Windows Server 2016 以降で SQL 用のグループ管理サービス アカウントを構成する"^]



.タスク概要
SnapCenter Serverをプラグイン ホストとして別のSnapCenter Serverに追加することはできません。

ホストの追加とプラグイン パッケージのインストールは、ホストごとまたはクラスタごとに実行できます。クラスタまたはWindows Serverフェイルオーバー クラスタリング（WSFC）にプラグインをインストールする場合、プラグインはクラスタのすべてのノードにインストールされます。

ホストの管理については、以下を参照してください。link:../admin/concept_manage_hosts.html["ホストの管理"^] 。

.手順
. 左側のナビゲーション ペインで、[*ホスト*] を選択します。
. 上部の*管理対象ホスト*タブが選択されていることを確認します。
. *追加*を選択します。
. [Hosts]ページで次の操作を実行します。
+
|===
| フィールド | 操作 


 a| 
ホストタイプ
 a| 
ホスト タイプとして[Windows]を選択します。SnapCenter Serverはホストを追加し、Plug-in for Windowsをホストにインストールします（プラグインがまだインストールされていない場合）。

[Plug-ins]ページで[Microsoft SQL Server]オプションを選択した場合、SnapCenter ServerはPlug-in for SQL Serverをインストールします。



 a| 
ホスト名
 a| 
ホストの完全修飾ドメイン名（FQDN）またはIPアドレスを入力します。信頼されないドメイン ホストのIPアドレスは、FQDNに解決される場合にのみサポートされます。

SnapCenterが機能するためには、DNSが適切に設定されている必要があります。そのため、FQDNを入力することを推奨します。

次のいずれかのIPアドレスまたはFQDNを入力できます。

** スタンドアロン ホスト
** WSFC SnapCenterを使用してホストを追加し、そのホストがサブドメインの一部である場合は、FQDN を指定する必要があります。




 a| 
Credentials
 a| 
作成したクレデンシャル名を選択するか、新しいクレデンシャルを作成します。このクレデンシャルには、リモート ホストに対する管理者権限が必要です。詳細については、クレデンシャルの作成に関する情報を参照してください。

指定したクレデンシャル名にカーソルを合わせると、クレデンシャルの詳細を確認できます。


NOTE: クレデンシャルの認証モードは、[Add Host]ウィザードで指定するホスト タイプによって決まります。

|===
. *インストールするプラグインの選択*セクションで、インストールするプラグインを選択します。
. *その他のオプション*を選択します。
+
|===
| フィールド | 操作 


 a| 
ポート
 a| 
デフォルトのポート番号をそのまま使用するか、ポート番号を指定します。デフォルトのポート番号は8145です。SnapCenter Serverがカスタム ポートにインストールされている場合は、そのポート番号がデフォルト ポートとして表示されます。


NOTE: プラグインを手動でインストールしてカスタム ポートを指定した場合は、同じポートを指定する必要があります。そうしないと、処理が失敗します。



 a| 
Installation Path
 a| 
デフォルトのパスはC:\Program Files\NetApp\SnapCenterです。必要に応じて変更できます。



 a| 
クラスター内のすべてのホストを追加する
 a| 
WSFCまたはSQL可用性グループ内のすべてのクラスタ ノードを追加するには、このチェック ボックスをオンにします。クラスタ内の使用可能な複数のSQL可用性グループを管理および識別する場合は、GUIで該当するクラスタのチェック ボックスをオンにして、すべてのクラスタ ノードを追加する必要があります。



 a| 
Skip preinstall checks
 a| 
プラグインを手動でインストール済みで、プラグインをインストールするための要件をホストが満たしているかどうかを検証しない場合は、このチェック ボックスをオンにします。



 a| 
Use group Managed Service Account (gMSA) to run the plug-in services
 a| 
グループ管理サービス アカウント（gMSA）を使用してプラグイン サービスを実行する場合は、このチェック ボックスをオンにします。

gMSA名をdomainName\accountName$の形式で指定します。


NOTE: ホストがgMSAに追加されていて、gMSAにログイン権限とシステム管理者権限がある場合は、SQLインスタンスへの接続にgMSAが使用されます。

|===
. *送信*を選択します。
. （SQLプラグインの場合）ログ ディレクトリを設定するホストを選択します。
+
.. *ログ ディレクトリの構成* を選択し、ホスト ログ ディレクトリの構成ページで *参照* を選択して、次の手順を実行します。
+
NetApp LUN（ドライブ）のみが選択肢として表示されます。SnapCenterは、バックアップ処理の一環として、ホスト ログ ディレクトリをバックアップしてレプリケートします。

+
image::../media/host_managed_hosts_configureplugin.gif[プラグイン ページの設定]

+
... ホスト ログの格納先とするホスト上のドライブ レターまたはマウント ポイントを選択します。
... 必要に応じてサブディレクトリを選択します。
... *保存*を選択します。




. *送信*を選択します。
+
「*事前チェックをスキップ*」チェックボックスを選択していない場合、ホストがプラグインのインストール要件を満たしているかどうかが検証されます。ディスク容量、RAM、PowerShellバージョン、.NETバージョン、場所（Windowsプラグインの場合）、Javaバージョン（Linuxプラグインの場合）が最小要件に照らして検証されます。最小要件を満たしていない場合、対応するエラーまたは警告メッセージが表示されます。

+
エラーがディスク スペースまたはRAMに関連している場合は、C:\Program Files\NetApp\SnapCenter WebAppにあるweb.configファイルを更新してデフォルト値を変更できます。エラーが他のパラメータに関連している場合は、問題を修正する必要があります。

+

NOTE: HAのセットアップでweb.configファイルを更新する場合は、両方のノードでファイルを更新する必要があります。

. インストールの進捗状況を監視します。


---
permalink: protect-scsql/task_determine_whether_resources_are_available_for_backup.html 
sidebar: sidebar 
keywords: credentials 
summary: リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーション インスタンス、可用性グループなどのコンポーネントのことです。リソースをリソース グループに追加することでデータ保護ジョブを実行できますが、その前に使用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。 
---
= リソースをバックアップに使用できるかどうかの確認
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーション インスタンス、可用性グループなどのコンポーネントのことです。リソースをリソース グループに追加することでデータ保護ジョブを実行できますが、その前に使用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。

.開始する前に
* SnapCenter Serverのインストール、ホストの追加、ストレージ システム接続の作成、クレデンシャルの追加などのタスクを完了しておく必要があります。
* Microsoft SQLデータベースを検出するには、次のいずれかの条件を満たしている必要があります。
+
** プラグイン ホストをSnapCenter Server に追加するために使用されたユーザーには、Microsoft SQL Server に対する必要な権限 (sysadmin) が必要です。
** 上記の条件が満たされない場合は、 SnapCenter Server で、Microsoft SQL Server に対する必要な権限 (sysadmin) を持つユーザーを構成する必要があります。ユーザはMicrosoft SQL Serverインスタンス レベルで設定する必要があります。ユーザはSQLユーザまたはWindowsユーザのいずれかです。


* Windowsクラスタ内のMicrosoft SQLデータベースを検出するには、フェイルオーバー クラスタ インスタンス（FCI）のTCP/IPポートのブロックを解除する必要があります。
* データベースがVMware RDM LUNまたはVMDK上にある場合は、SnapCenter Plug-in for VMware vSphereを導入してSnapCenterに登録する必要があります。
+
詳細については、 https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_deploy_snapcenter_plug-in_for_vmware_vsphere.html["SnapCenter Plug-in for VMware vSphereの導入"^]

* ホストがgMSAに追加されていて、gMSAにログイン権限とシステム管理者権限がある場合は、SQLインスタンスへの接続にgMSAが使用されます。


.タスク概要
詳細ページの*全体的なステータス*オプションがバックアップ不可に設定されている場合は、データベースをバックアップできません。次のいずれかに該当する場合、*全体的なステータス* オプションはバックアップに利用できませんに設定されます。

* データベースがNetApp LUN上にない。
* データベースが正常な状態でない。
+
データベースがオフライン、リストア中、リカバリの保留中、サスペクトなどの状態です。

* データベースへの十分な権限がない。
+
たとえば、ユーザにデータベースを表示するアクセス権しかない場合は、データベースのファイルとプロパティを特定してバックアップすることができません。




NOTE: SQL Server Standard Editionに可用性グループを構成している場合、SnapCenterでバックアップできるのはプライマリ データベースのみです。

.手順
. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] ドロップダウン リストから [データベース]、[インスタンス]、または [可用性グループ] を選択します。
+
をクリックし、 image:../media/filter_icon.gif["フィルターアイコン"] ホスト名とSQL Serverインスタンスを選択してリソースをフィルタリングします。そのあとにimage:../media/filter_icon.gif["フィルターアイコン"]をクリックすると、フィルタ ペインが閉じます。

. *リソースの更新*をクリックします。
+
新たに追加、名称変更、削除されたリソースが、SnapCenter Serverのインベントリで更新されます。

+

IMPORTANT: SnapCenterの外部でデータベースの名前が変更された場合は、リソースを更新する必要があります。

+
リソースは、リソース タイプ、ホストまたはクラスタ名、関連するリソース グループ、バックアップ タイプ、ポリシー、全体的なステータスなどの情報とともに表示されます。

+
** データベースがNetApp以外のストレージ上にある場合、 `Not available for backup` *全体のステータス*列に表示されます。
+
NetApp以外のストレージにあるデータベースには、データ保護処理を実行できません。

** データベースがNetAppストレージ上にあり、保護されていない場合は、 `Not protected` *全体のステータス*列に表示されます。
** データベースがNetAppストレージシステム上にあり、保護されている場合、ユーザーインターフェースには次のように表示されます。 `Backup not run` *全体的なステータス*列にメッセージが表示されます。
** データベースがNetAppストレージシステム上にあり、保護されており、データベースのバックアップがトリガーされた場合、ユーザーインターフェースには次のように表示されます。 `Backup succeeded` *全体的なステータス*列にメッセージが表示されます。





NOTE: クレデンシャルの設定時にSQL認証を有効にすると、検出されたインスタンスやデータベースに赤い鍵マークのアイコンが表示されます。鍵マークのアイコンが表示された場合、リソース グループに追加する際にそのインスタンスまたはデータベースのクレデンシャルを指定する必要があります。

. SnapCenter管理者が RBAC ユーザーにリソースを割り当てた後、RBAC ユーザーはログインして [*リソースの更新*] をクリックし、リソースの最新の *全体的なステータス* を確認する必要があります。


---
permalink: protect-sco/task_mount_and_unmount_databases_backups.html 
sidebar: sidebar 
keywords: mount, unmount, backup, ASM, asm_diskstring 
summary: バックアップ内のファイルにアクセスする必要がある場合は、1つまたは複数のデータ バックアップや、ログのみのバックアップをマウントできます。バックアップは、バックアップが作成されたホストにも、同じタイプのOracleおよびホスト構成を使用するリモート ホストにもマウントできます。バックアップを手動でマウントした場合は、処理の完了後にバックアップを手動でアンマウントする必要があります。特定のデータベースのホスト上でデータベース バックアップを 1 回だけマウントできます。処理を実行する際には、バックアップを1つだけマウントできます。 
---
= データベース バックアップのマウントとアンマウント
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
バックアップ内のファイルにアクセスする必要がある場合は、1つまたは複数のデータ バックアップや、ログのみのバックアップをマウントできます。バックアップは、バックアップが作成されたホストにも、同じタイプのOracleおよびホスト構成を使用するリモート ホストにもマウントできます。バックアップを手動でマウントした場合は、処理の完了後にバックアップを手動でアンマウントする必要があります。任意のインスタンスで、データベースのバックアップを任意のホストにマウントできます。処理を実行する際には、バックアップを1つだけマウントできます。


NOTE: Flex ASMセットアップでは、カーディナリティがRACクラスタ内のノード数より少ない場合、リーフ ノードでマウント処理を実行できません。



== データベース バックアップをマウントする

バックアップ内のファイルにアクセスする必要がある場合は、データベース バックアップを手動でマウントします。

*必要なもの*

* NFS 環境に Automatic Storage Management (ASM) データベース インスタンスがあり、ASM バックアップをマウントする場合は、asm_diskstring パラメータで定義されている既存のパスに ASM ディスク パス _/var/opt/snapcenter/sco/backup_*/_*_/_*_/_*_/_*_ を追加する必要があります。
* NFS 環境に ASM データベース インスタンスがあり、リカバリ操作の一環として ASM ログ バックアップをマウントする場合は、asm_diskstring パラメータで定義されている既存のパスに ASM ディスク パス _/var/opt/snapcenter/scu/clones/_*_/_*_ を追加する必要があります。
* asm_diskstring パラメータでは、ASMFD を使用している場合は _AFD:*_ を構成し、ASMLIB を使用している場合は _ORCL:*_ を構成する必要があります。



NOTE: asm_diskstringパラメータを編集する方法については、以下を参照してください。 https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapCenter/Disk_paths_are_not_added_to_the_asm_diskstring_database_parameter["asm_diskstringにディスクパスを追加する方法"^] 。

* バックアップのマウント時に使うASMクレデンシャルとASMポートがソース データベース ホストのものと異なる場合は、ASMクレデンシャルとASMポートを設定する必要があります。
* 代替ホストにマウントする場合は、代替ホストが次の要件を満たしていることを確認する必要があります。
+
** UIDとGIDが元のホストと同じである
** 元のホストと同じOracleバージョン
** 元のホストと同じOSディストリビューションとバージョン
** NVMeの場合は、NVMeユーティリティがインストールされている必要があります。


* iSCSIプロトコルとFCプロトコルが混在するigroupを使用して、LUNがAIXホストにマッピングされていないことを確認します。詳細については、以下を参照してください。  https://kb.netapp.com/mgmt/SnapCenter/SnapCenter_Plug-in_for_Oracle_operations_fail_with_error_Unable_to_discover_the_device_for_LUN_LUN_PATH["LUNのデバイスを検出できないというエラーが発生し、操作が失敗しました"^] 。


*手順*

. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから [データベース] または [リソース グループ] を選択します。
. データベースの詳細ビューまたはリソース グループの詳細ビューでデータベースを選択します。
+
データベース トポロジのページが表示されます。

. [コピーの管理] ビューで、プライマリまたはセカンダリ (ミラーリングまたは複製) ストレージ システムから [*バックアップ*] を選択します。
. 表からバックアップを選択し、クリックしますimage:../media/mount_icon.gif["マウントアイコン"]。
. [バックアップのマウント] ページで、[*バックアップをマウントするホストを選択*] ドロップダウン リストから、バックアップをマウントするホストを選択します。
+
マウント パス _/var/opt/snapcenter/sco/backup_mount/backup_name/database_name_ が表示されます。

+
ASM データベースのバックアップをマウントしている場合は、マウント パス +diskgroupname_SID_backupid が表示されます。

. *マウント*をクリックします。


*終わったら*

* 次のコマンドを実行して、マウントされたバックアップに関する情報を取得できます。
+
`./sccli Get-SmBackup -BackupName backup_name -ListMountInfo`

* ASMデータベースをマウントした場合に、マウントされたバックアップに関する情報を取得するには、次のコマンドを実行します。
+
`./sccli Get-Smbackup -BackupNamediskgroupname_SID_backupid-listmountinfo`

* バックアップIDを取得するには、次のコマンドを実行します。
+
`./sccli Get-Smbackup-BackupNamebackup_name`

+
コマンドで使用できるパラメータとその説明に関する情報は、Get-Help _command_name_ を実行すると取得できます。あるいは、 https://library.netapp.com/ecm/ecm_download_file/ECMLP3337666["SnapCenterソフトウェア コマンド リファレンス ガイド"^] 。





== データベース バックアップをアンマウントする

マウントされたデータベース バックアップ上のファイルにアクセスする必要がなくなった場合は、そのバックアップを手動でアンマウントできます。

*手順*

. 左側のナビゲーション ペインで [*リソース*] をクリックし、リストから適切なプラグインを選択します。
. [リソース] ページで、[表示] リストから [データベース] または [リソース グループ] を選択します。
. データベースの詳細ビューまたはリソース グループの詳細ビューでデータベースを選択します。
+
データベース トポロジのページが表示されます。

. マウントされているバックアップを選択し、クリックしますimage:../media/unmount_icon.gif["アンマウントアイコン"]。
. [OK]をクリックします。

